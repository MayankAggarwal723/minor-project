<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Database Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
        }
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
        }
        .hospital-card {
            border-left: 4px solid #2563eb;
        }
        .bed-counter {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .bed-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .bed-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            border: none;
        }
        .bed-increase {
            background: #10b981;
            color: white;
        }
        .bed-decrease {
            background: #ef4444;
            color: white;
        }
        .availability-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }
        .availability-high { background: #10b981; }
        .availability-medium { background: #f59e0b; }
        .availability-low { background: #ef4444; }
        .availability-critical { 
            background: #7c2d12; 
            animation: pulseCritical 2s infinite;
        }
        @keyframes pulseCritical {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        .status-good { background: #dcfce7; color: #166534; }
        .status-warning { background: #fef3c7; color: #92400e; }
        .status-critical { background: #fecaca; color: #991b1b; }
        .update-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1002;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        .update-notification.show {
            transform: translateX(0);
        }
    </style>
</head>
<body class="min-h-screen p-8">
    <!-- Update Notification -->
    <div class="update-notification" id="updateNotification">
        <i class="fas fa-sync-alt"></i>
        <span>Changes saved! Updating hospitals page...</span>
    </div>
    
    <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Hospital Database Manager</h1>
        <p class="text-gray-600 mb-8">Make changes to bed availability and see real-time updates on the hospitals page</p>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Hospital Controls -->
            <div>
                <div class="card">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Hospital Bed Management</h2>
                    <p class="text-gray-600 mb-6">Use the controls below to update bed availability. Changes will reflect in real-time on the hospitals page.</p>
                    
                    <div id="hospitalControls">
                        <!-- Hospital controls will be populated here -->
                    </div>
                </div>
                
                <div class="card">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Quick Actions</h2>
                    <div class="flex flex-wrap gap-4">
                        <button id="resetAll" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                            Reset All Hospitals
                        </button>
                        <button id="simulateEmergency" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                            Simulate Emergency (Reduce Beds)
                        </button>
                        <button id="simulateRecovery" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                            Simulate Recovery (Increase Beds)
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Preview -->
            <div>
                <div class="card">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Live Preview</h2>
                    <p class="text-gray-600 mb-6">This shows how the data will appear on the hospitals page</p>
                    
                    <div id="livePreview">
                        <!-- Live preview will be updated here -->
                    </div>
                </div>
                
                <div class="card">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Connection Status</h2>
                    <div class="flex items-center">
                        <div id="connectionStatus" class="w-3 h-3 rounded-full bg-green-500 mr-2"></div>
                        <span id="connectionText" class="text-green-700 font-medium">Connected to hospitals page</span>
                    </div>
                    <p class="text-gray-600 text-sm mt-2">Changes will automatically update on the hospitals page without refreshing</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Hospital Database
        const hospitalDatabase = {
            // Get data from localStorage or use default data
            getHospitals: function() {
                const storedData = localStorage.getItem('hospitalDatabase');
                if (storedData) {
                    return JSON.parse(storedData);
                }
                
                // Default data
                return [
                    {
                        id: 1,
                        name: "AIIMS Delhi",
                        type: "government",
                        address: "Ansari Nagar, New Delhi, Delhi 110029",
                        phone: "011-26588500",
                        website: "www.aiims.edu",
                        distance: 2.1,
                        rating: 4.8,
                        emergency: true,
                        specialties: ["Cardiology", "Neurology", "Oncology", "Trauma", "Orthopedics"],
                        availability: {
                            general: { available: 42, total: 60 },
                            icu: { available: 8, total: 12 },
                            emergency: { available: 5, total: 8 },
                            oxygen: { available: 15, total: 20 }
                        },
                        coordinates: { lat: 28.567, lng: 77.211 }
                    },
                    {
                        id: 2,
                        name: "Apollo Hospital",
                        type: "private",
                        address: "Sarita Vihar, Delhi Mathura Road, New Delhi 110076",
                        phone: "011-26925858",
                        website: "www.apollohospitals.com",
                        distance: 3.5,
                        rating: 4.6,
                        emergency: true,
                        specialties: ["Cardiology", "Neurology", "Oncology", "Transplant"],
                        availability: {
                            general: { available: 28, total: 40 },
                            icu: { available: 4, total: 8 },
                            emergency: { available: 2, total: 6 },
                            oxygen: { available: 8, total: 15 }
                        },
                        coordinates: { lat: 28.532, lng: 77.292 }
                    },
                    {
                        id: 3,
                        name: "Max Super Specialty Hospital",
                        type: "private",
                        address: "Press Enclave Road, Saket, New Delhi 110017",
                        phone: "011-26515050",
                        website: "www.maxhealthcare.in",
                        distance: 5.2,
                        rating: 4.7,
                        emergency: true,
                        specialties: ["Cardiology", "Oncology", "Orthopedics", "Neurology"],
                        availability: {
                            general: { available: 35, total: 50 },
                            icu: { available: 6, total: 10 },
                            emergency: { available: 4, total: 8 },
                            oxygen: { available: 12, total: 18 }
                        },
                        coordinates: { lat: 28.527, lng: 77.218 }
                    },
                    {
                        id: 4,
                        name: "Safdarjung Hospital",
                        type: "government",
                        address: "Ansari Nagar West, New Delhi 110029",
                        phone: "011-26165060",
                        website: "www.safdarjunghospital.nic.in",
                        distance: 4.7,
                        rating: 4.3,
                        emergency: true,
                        specialties: ["Trauma", "Emergency", "General Medicine", "Surgery"],
                        availability: {
                            general: { available: 5, total: 35 },
                            icu: { available: 1, total: 6 },
                            emergency: { available: 0, total: 4 },
                            oxygen: { available: 2, total: 10 }
                        },
                        coordinates: { lat: 28.568, lng: 77.208 }
                    }
                ];
            },
            
            // Save data to localStorage
            saveHospitals: function(hospitals) {
                localStorage.setItem('hospitalDatabase', JSON.stringify(hospitals));
                
                // Also trigger a storage event for cross-tab communication
                window.dispatchEvent(new Event('storage'));
            },
            
            // Get hospital by ID
            getHospitalById: function(id) {
                const hospitals = this.getHospitals();
                return hospitals.find(h => h.id === id);
            },
            
            // Update bed availability
            updateBedAvailability: function(hospitalId, bedType, newAvailable) {
                const hospitals = this.getHospitals();
                const hospital = hospitals.find(h => h.id === hospitalId);
                
                if (hospital && hospital.availability[bedType]) {
                    // Ensure we don't exceed total beds
                    newAvailable = Math.max(0, Math.min(newAvailable, hospital.availability[bedType].total));
                    hospital.availability[bedType].available = newAvailable;
                    
                    // Save and notify
                    this.saveHospitals(hospitals);
                    return true;
                }
                return false;
            },
            
            // Increase bed count
            increaseBeds: function(hospitalId, bedType, amount = 1) {
                const hospital = this.getHospitalById(hospitalId);
                if (hospital && hospital.availability[bedType]) {
                    const newAvailable = Math.min(
                        hospital.availability[bedType].available + amount,
                        hospital.availability[bedType].total
                    );
                    return this.updateBedAvailability(hospitalId, bedType, newAvailable);
                }
                return false;
            },
            
            // Decrease bed count
            decreaseBeds: function(hospitalId, bedType, amount = 1) {
                const hospital = this.getHospitalById(hospitalId);
                if (hospital && hospital.availability[bedType]) {
                    const newAvailable = Math.max(
                        0,
                        hospital.availability[bedType].available - amount
                    );
                    return this.updateBedAvailability(hospitalId, bedType, newAvailable);
                }
                return false;
            },
            
            // Reset hospital to original state
            resetHospital: function(hospitalId) {
                const originalData = this.getOriginalHospitalData(hospitalId);
                if (originalData) {
                    const hospitals = this.getHospitals();
                    const hospital = hospitals.find(h => h.id === hospitalId);
                    Object.assign(hospital, JSON.parse(JSON.stringify(originalData)));
                    this.saveHospitals(hospitals);
                    return true;
                }
                return false;
            },
            
            // Reset all hospitals
            resetAllHospitals: function() {
                const hospitals = this.getHospitals();
                hospitals.forEach(hospital => {
                    const originalData = this.getOriginalHospitalData(hospital.id);
                    if (originalData) {
                        Object.assign(hospital, JSON.parse(JSON.stringify(originalData)));
                    }
                });
                this.saveHospitals(hospitals);
            },
            
            // Get original hospital data (for reset)
            getOriginalHospitalData: function(hospitalId) {
                // In a real implementation, you might store original data separately
                // For this demo, we'll use the initial state
                const originalHospitals = [
                    {
                        id: 1,
                        name: "AIIMS Delhi",
                        type: "government",
                        address: "Ansari Nagar, New Delhi, Delhi 110029",
                        phone: "011-26588500",
                        website: "www.aiims.edu",
                        distance: 2.1,
                        rating: 4.8,
                        emergency: true,
                        specialties: ["Cardiology", "Neurology", "Oncology", "Trauma", "Orthopedics"],
                        availability: {
                            general: { available: 42, total: 60 },
                            icu: { available: 8, total: 12 },
                            emergency: { available: 5, total: 8 },
                            oxygen: { available: 15, total: 20 }
                        },
                        coordinates: { lat: 28.567, lng: 77.211 }
                    },
                    {
                        id: 2,
                        name: "Apollo Hospital",
                        type: "private",
                        address: "Sarita Vihar, Delhi Mathura Road, New Delhi 110076",
                        phone: "011-26925858",
                        website: "www.apollohospitals.com",
                        distance: 3.5,
                        rating: 4.6,
                        emergency: true,
                        specialties: ["Cardiology", "Neurology", "Oncology", "Transplant"],
                        availability: {
                            general: { available: 28, total: 40 },
                            icu: { available: 4, total: 8 },
                            emergency: { available: 2, total: 6 },
                            oxygen: { available: 8, total: 15 }
                        },
                        coordinates: { lat: 28.532, lng: 77.292 }
                    },
                    {
                        id: 3,
                        name: "Max Super Specialty Hospital",
                        type: "private",
                        address: "Press Enclave Road, Saket, New Delhi 110017",
                        phone: "011-26515050",
                        website: "www.maxhealthcare.in",
                        distance: 5.2,
                        rating: 4.7,
                        emergency: true,
                        specialties: ["Cardiology", "Oncology", "Orthopedics", "Neurology"],
                        availability: {
                            general: { available: 35, total: 50 },
                            icu: { available: 6, total: 10 },
                            emergency: { available: 4, total: 8 },
                            oxygen: { available: 12, total: 18 }
                        },
                        coordinates: { lat: 28.527, lng: 77.218 }
                    },
                    {
                        id: 4,
                        name: "Safdarjung Hospital",
                        type: "government",
                        address: "Ansari Nagar West, New Delhi 110029",
                        phone: "011-26165060",
                        website: "www.safdarjunghospital.nic.in",
                        distance: 4.7,
                        rating: 4.3,
                        emergency: true,
                        specialties: ["Trauma", "Emergency", "General Medicine", "Surgery"],
                        availability: {
                            general: { available: 5, total: 35 },
                            icu: { available: 1, total: 6 },
                            emergency: { available: 0, total: 4 },
                            oxygen: { available: 2, total: 10 }
                        },
                        coordinates: { lat: 28.568, lng: 77.208 }
                    }
                ];
                
                return originalHospitals.find(h => h.id === hospitalId);
            }
        };

        // UI Controller
        const hospitalUIController = {
            // Initialize the UI
            init: function() {
                this.renderHospitalControls();
                this.renderLivePreview();
                this.setupEventListeners();
            },
            
            // Render hospital controls
            renderHospitalControls: function() {
                const container = document.getElementById('hospitalControls');
                container.innerHTML = '';
                
                hospitalDatabase.getHospitals().forEach(hospital => {
                    const hospitalElement = this.createHospitalControl(hospital);
                    container.appendChild(hospitalElement);
                });
            },
            
            // Create hospital control element
            createHospitalControl: function(hospital) {
                const element = document.createElement('div');
                element.className = 'hospital-card card mb-6';
                element.setAttribute('data-hospital-id', hospital.id);
                
                const availability = this.calculateAvailability(hospital);
                
                element.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="font-bold text-gray-800 text-lg">${hospital.name}</h3>
                            <div class="flex items-center mt-1">
                                <span class="availability-indicator ${availability.class}"></span>
                                <span class="${availability.textClass} font-semibold text-sm">${availability.text} Availability</span>
                                <span class="${hospital.type === 'government' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'} status-badge ml-2">
                                    ${hospital.type === 'government' ? 'Government' : 'Private'}
                                </span>
                            </div>
                        </div>
                        <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-1 rounded text-sm font-medium reset-hospital" data-hospital-id="${hospital.id}">
                            Reset
                        </button>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="bed-counter">
                            <span class="text-gray-700 font-medium">General Beds</span>
                            <div class="bed-controls">
                                <button class="bed-btn bed-decrease" data-hospital-id="${hospital.id}" data-bed-type="general">-</button>
                                <span class="font-bold mx-2">${hospital.availability.general.available}/${hospital.availability.general.total}</span>
                                <button class="bed-btn bed-increase" data-hospital-id="${hospital.id}" data-bed-type="general">+</button>
                            </div>
                        </div>
                        
                        <div class="bed-counter">
                            <span class="text-gray-700 font-medium">ICU Beds</span>
                            <div class="bed-controls">
                                <button class="bed-btn bed-decrease" data-hospital-id="${hospital.id}" data-bed-type="icu">-</button>
                                <span class="font-bold mx-2">${hospital.availability.icu.available}/${hospital.availability.icu.total}</span>
                                <button class="bed-btn bed-increase" data-hospital-id="${hospital.id}" data-bed-type="icu">+</button>
                            </div>
                        </div>
                        
                        <div class="bed-counter">
                            <span class="text-gray-700 font-medium">Emergency Beds</span>
                            <div class="bed-controls">
                                <button class="bed-btn bed-decrease" data-hospital-id="${hospital.id}" data-bed-type="emergency">-</button>
                                <span class="font-bold mx-2">${hospital.availability.emergency.available}/${hospital.availability.emergency.total}</span>
                                <button class="bed-btn bed-increase" data-hospital-id="${hospital.id}" data-bed-type="emergency">+</button>
                            </div>
                        </div>
                        
                        <div class="bed-counter">
                            <span class="text-gray-700 font-medium">Oxygen Beds</span>
                            <div class="bed-controls">
                                <button class="bed-btn bed-decrease" data-hospital-id="${hospital.id}" data-bed-type="oxygen">-</button>
                                <span class="font-bold mx-2">${hospital.availability.oxygen.available}/${hospital.availability.oxygen.total}</span>
                                <button class="bed-btn bed-increase" data-hospital-id="${hospital.id}" data-bed-type="oxygen">+</button>
                            </div>
                        </div>
                    </div>
                `;
                
                return element;
            },
            
            // Update a specific hospital in the UI
            updateHospitalInUI: function(hospitalId) {
                const hospital = hospitalDatabase.getHospitalById(hospitalId);
                if (!hospital) return;
                
                const hospitalElement = document.querySelector(`[data-hospital-id="${hospitalId}"]`);
                if (!hospitalElement) return;
                
                // Update bed counts
                const bedTypes = ['general', 'icu', 'emergency', 'oxygen'];
                bedTypes.forEach(bedType => {
                    const countElement = hospitalElement.querySelector(`[data-bed-type="${bedType}"]`).parentNode.querySelector('span');
                    if (countElement) {
                        countElement.textContent = `${hospital.availability[bedType].available}/${hospital.availability[bedType].total}`;
                    }
                });
                
                // Update availability indicator
                const availability = this.calculateAvailability(hospital);
                const indicator = hospitalElement.querySelector('.availability-indicator');
                const text = hospitalElement.querySelector('.availability-indicator').nextElementSibling;
                
                if (indicator) {
                    indicator.className = `availability-indicator ${availability.class}`;
                }
                if (text) {
                    text.className = `${availability.textClass} font-semibold text-sm`;
                    text.textContent = `${availability.text} Availability`;
                }
            },
            
            // Render live preview
            renderLivePreview: function() {
                const container = document.getElementById('livePreview');
                container.innerHTML = '';
                
                hospitalDatabase.getHospitals().forEach(hospital => {
                    const hospitalElement = this.createLivePreviewCard(hospital);
                    container.appendChild(hospitalElement);
                });
            },
            
            // Create live preview card
            createLivePreviewCard: function(hospital) {
                const element = document.createElement('div');
                element.className = 'bg-white border border-gray-200 rounded-xl p-4 mb-4';
                element.setAttribute('data-preview-hospital-id', hospital.id);
                
                const availability = this.calculateAvailability(hospital);
                
                element.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-semibold text-gray-800">${hospital.name}</h4>
                        <div class="flex items-center">
                            <span class="availability-indicator ${availability.class}"></span>
                            <span class="text-xs ${availability.textClass}">${availability.text}</span>
                        </div>
                    </div>
                    <div class="flex items-center text-gray-600 text-sm mb-2">
                        <i class="fas fa-map-marker-alt text-red-500 mr-2 w-4"></i>
                        <span>${hospital.distance} km away</span>
                        <span class="${hospital.type === 'government' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'} text-xs px-2 py-0.5 rounded ml-2">
                            ${hospital.type === 'government' ? 'Govt' : 'Private'}
                        </span>
                    </div>
                    <div class="grid grid-cols-2 gap-2 text-sm">
                        <div class="text-center bg-gray-100 p-2 rounded">
                            <div class="font-bold">${hospital.availability.general.available}</div>
                            <div class="text-gray-600 text-xs">General Beds</div>
                        </div>
                        <div class="text-center bg-gray-100 p-2 rounded">
                            <div class="font-bold">${hospital.availability.icu.available}</div>
                            <div class="text-gray-600 text-xs">ICU Beds</div>
                        </div>
                        <div class="text-center bg-gray-100 p-2 rounded">
                            <div class="font-bold">${hospital.availability.emergency.available}</div>
                            <div class="text-gray-600 text-xs">Emergency</div>
                        </div>
                        <div class="text-center bg-gray-100 p-2 rounded">
                            <div class="font-bold">${hospital.availability.oxygen.available}</div>
                            <div class="text-gray-600 text-xs">Oxygen Beds</div>
                        </div>
                    </div>
                `;
                
                return element;
            },
            
            // Update live preview
            updateLivePreview: function() {
                const container = document.getElementById('livePreview');
                container.innerHTML = '';
                this.renderLivePreview();
            },
            
            // Calculate availability status
            calculateAvailability: function(hospital) {
                const totalBeds = hospital.availability.general.total + hospital.availability.icu.total + hospital.availability.emergency.total;
                const availableBeds = hospital.availability.general.available + hospital.availability.icu.available + hospital.availability.emergency.available;
                const availabilityRatio = availableBeds / totalBeds;
                
                if (availabilityRatio >= 0.7) {
                    return { class: 'availability-high', text: 'Good', textClass: 'text-green-600' };
                } else if (availabilityRatio >= 0.4) {
                    return { class: 'availability-medium', text: 'Moderate', textClass: 'text-yellow-600' };
                } else if (availabilityRatio >= 0.1) {
                    return { class: 'availability-low', text: 'Limited', textClass: 'text-red-600' };
                } else {
                    return { class: 'availability-critical', text: 'Critical', textClass: 'text-red-800' };
                }
            },
            
            // Setup event listeners
            setupEventListeners: function() {
                // Increase bed buttons
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('bed-increase')) {
                        const hospitalId = parseInt(e.target.getAttribute('data-hospital-id'));
                        const bedType = e.target.getAttribute('data-bed-type');
                        hospitalDatabase.increaseBeds(hospitalId, bedType);
                        this.updateHospitalInUI(hospitalId);
                        this.updateLivePreview();
                        this.showUpdateNotification();
                    }
                });
                
                // Decrease bed buttons
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('bed-decrease')) {
                        const hospitalId = parseInt(e.target.getAttribute('data-hospital-id'));
                        const bedType = e.target.getAttribute('data-bed-type');
                        hospitalDatabase.decreaseBeds(hospitalId, bedType);
                        this.updateHospitalInUI(hospitalId);
                        this.updateLivePreview();
                        this.showUpdateNotification();
                    }
                });
                
                // Reset hospital buttons
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('reset-hospital')) {
                        const hospitalId = parseInt(e.target.getAttribute('data-hospital-id'));
                        hospitalDatabase.resetHospital(hospitalId);
                        this.updateHospitalInUI(hospitalId);
                        this.updateLivePreview();
                        this.showUpdateNotification();
                    }
                });
                
                // Reset all button
                document.getElementById('resetAll').addEventListener('click', () => {
                    hospitalDatabase.resetAllHospitals();
                    this.renderHospitalControls();
                    this.updateLivePreview();
                    this.showUpdateNotification();
                });
                
                // Simulate emergency button
                document.getElementById('simulateEmergency').addEventListener('click', () => {
                    hospitalDatabase.getHospitals().forEach(hospital => {
                        // Randomly reduce beds to simulate emergency
                        const bedTypes = ['general', 'icu', 'emergency', 'oxygen'];
                        bedTypes.forEach(bedType => {
                            const reduction = Math.floor(Math.random() * 3) + 1; // Reduce by 1-3 beds
                            hospitalDatabase.decreaseBeds(hospital.id, bedType, reduction);
                        });
                        this.updateHospitalInUI(hospital.id);
                    });
                    this.updateLivePreview();
                    this.showUpdateNotification();
                });
                
                // Simulate recovery button
                document.getElementById('simulateRecovery').addEventListener('click', () => {
                    hospitalDatabase.getHospitals().forEach(hospital => {
                        // Randomly increase beds to simulate recovery
                        const bedTypes = ['general', 'icu', 'emergency', 'oxygen'];
                        bedTypes.forEach(bedType => {
                            const increase = Math.floor(Math.random() * 3) + 1; // Increase by 1-3 beds
                            hospitalDatabase.increaseBeds(hospital.id, bedType, increase);
                        });
                        this.updateHospitalInUI(hospital.id);
                    });
                    this.updateLivePreview();
                    this.showUpdateNotification();
                });
            },
            
            // Show update notification
            showUpdateNotification: function() {
                const notification = document.getElementById('updateNotification');
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            hospitalUIController.init();
            
            // Simulate connection to hospitals page
            setInterval(() => {
                const statusElement = document.getElementById('connectionStatus');
                const textElement = document.getElementById('connectionText');
                
                // Randomly change status to simulate real-world conditions
                if (Math.random() > 0.95) {
                    statusElement.className = 'w-3 h-3 rounded-full bg-yellow-500 mr-2';
                    textElement.textContent = 'Connection unstable';
                    textElement.className = 'text-yellow-700 font-medium';
                } else {
                    statusElement.className = 'w-3 h-3 rounded-full bg-green-500 mr-2';
                    textElement.textContent = 'Connected to hospitals page';
                    textElement.className = 'text-green-700 font-medium';
                }
            }, 3000);
        });
    </script>
</body>
</html>