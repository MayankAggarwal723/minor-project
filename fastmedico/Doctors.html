<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastMedico - Doctors</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        'primary-dark': '#1d4ed8',
                        secondary: '#10b981',
                        accent: '#8b5cf6',
                    },
                    animation: {
                        'slide-in': 'slideIn 0.6s ease-out',
                        'fade-in': 'fadeIn 0.8s ease-out',
                        'scale-in': 'scaleIn 0.5s ease-out',
                        'pulse-gentle': 'pulseGentle 3s ease-in-out infinite',
                    },
                    keyframes: {
                        slideIn: {
                            '0%': { opacity: '0', transform: 'translateX(-20px)' },
                            '100%': { opacity: '1', transform: 'translateX(0)' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        scaleIn: {
                            '0%': { opacity: '0', transform: 'scale(0.9)' },
                            '100%': { opacity: '1', transform: 'scale(1)' }
                        },
                        pulseGentle: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.8' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
        }
        
        .sidebar {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        }
        
        .nav-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .nav-item.active {
            background: rgba(37, 99, 235, 0.2);
            border-left: 4px solid #2563eb;
        }
        
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .doctor-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .status-available {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-busy {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-offline {
            background: #f3f4f6;
            color: #6b7280;
        }
        
        .specialty-tag {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .specialty-cardiology {
            background: #fef2f2;
            color: #dc2626;
        }
        
        .specialty-neurology {
            background: #f0f9ff;
            color: #0369a1;
        }
        
        .specialty-dermatology {
            background: #fef7cd;
            color: #854d0e;
        }
        
        .specialty-orthopedics {
            background: #f3e8ff;
            color: #7c3aed;
        }
        
        .specialty-pediatrics {
            background: #dcfce7;
            color: #166534;
        }
        
        .doctor-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .doctor-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .doctor-card.selected {
            border-color: #2563eb;
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
        }
        
        .availability-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }
        
        .availability-online {
            background: #10b981;
        }
        
        .availability-offline {
            background: #6b7280;
        }
        
        .availability-busy {
            background: #f59e0b;
        }
        
        .rating-stars {
            color: #fbbf24;
        }
        
        .appointment-slot {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .appointment-slot:hover {
            background: #dbeafe;
            border-color: #2563eb;
        }
        
        .appointment-slot.selected {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }
        
        .time-slot-disabled {
            background: #f3f4f6;
            color: #9ca3af;
            cursor: not-allowed;
        }
        
        .consultation-type {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .consultation-type:hover {
            transform: scale(1.02);
        }
        
        .consultation-type.selected {
            border-color: #2563eb;
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
        }
        
        .emergency-btn-fixed {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #dc2626, #ef4444);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            animation: emergencyPulse 2s infinite;
        }

        .emergency-btn-fixed:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(220, 38, 38, 0.6);
        }

        .emergency-btn-fixed i {
            font-size: 20px;
            margin-bottom: 2px;
        }

        .emergency-btn-fixed.alerting {
            animation: emergencyAlert 0.5s infinite alternate;
            background: linear-gradient(135deg, #991b1b, #dc2626);
        }

        @keyframes emergencyPulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 8px 30px rgba(220, 38, 38, 0.6);
            }
        }

        @keyframes emergencyAlert {
            0% { 
                background: linear-gradient(135deg, #dc2626, #ef4444);
                transform: scale(1);
            }
            100% { 
                background: linear-gradient(135deg, #991b1b, #dc2626);
                transform: scale(1.1);
            }
        }

        .emergency-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            align-items: center;
            justify-content: center;
        }

        .emergency-modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            z-index: 1002;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #10b981;
        }

        .notification.error {
            background: #ef4444;
        }

        .notification.info {
            background: #3b82f6;
        }

        .notification.warning {
            background: #f59e0b;
        }
    </style>
</head>
<body class="min-h-screen flex">
    <!-- Sidebar -->
    <div class="sidebar w-64 min-h-screen text-white p-6 flex flex-col">
        <!-- Logo -->
        <div class="flex items-center space-x-3 mb-8 animate-slide-in">
            <i class="fas fa-heartbeat text-2xl text-primary"></i>
            <h1 class="text-xl font-bold">Fast<span class="text-primary">Medico</span></h1>
        </div>

        <!-- User Profile -->
        <div class="flex items-center space-x-3 mb-8 p-4 bg-white/10 rounded-xl animate-scale-in">
            <div id="sidebarInitials" class="w-12 h-12 bg-gradient-to-r from-primary to-accent rounded-full flex items-center justify-center">
                <span class="text-white font-semibold">RJ</span>
            </div>
            <div>
                <h3 id="sidebarName" class="font-semibold">Rajesh Kumar</h3>
                <p id="sidebarPatientId" class="text-sm text-gray-300">Patient ID: PM789456</p>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="space-y-2 flex-1">
            <a href="Dashboard.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-home w-5"></i>
                <span>Dashboard</span>
            </a>
            <a href="My Profile.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-user-circle w-5"></i>
                <span>My Profile</span>
            </a>
            <a href="hospitals.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-hospital w-5"></i>
                <span>Hospitals</span>
            </a>
            <a href="Appointments.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-calendar-check w-5"></i>
                <span>Appointments</span>
            </a>
            <a href="Prescriptions.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-prescription w-5"></i>
                <span>Prescriptions</span>
            </a>
            <a href="Medical Records.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-file-medical w-5"></i>
                <span>Medical Records</span>
            </a>
            <a href="Ambulance Services.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-ambulance w-5"></i>
                <span>Ambulance</span>
            </a>
            <a href="Medicines.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-pills w-5"></i>
                <span>Medicines</span>
            </a>
            <a href="Doctors.html" class="nav-item active flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-user-md w-5"></i>
                <span>Doctors</span>
            </a>
            <a href="Blood Bank.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-tint w-5"></i>
                <span>Blood Bank</span>
            </a>
            <a href="video consult.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-video w-5"></i>
                <span>Video Consult</span>
            </a>
            <a href="Ai Diagnosis.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg">
                <i class="fas fa-robot w-5"></i>
                <span>AI Diagnosis</span>
            </a>
        </nav>

        <!-- Emergency SOS Button -->
        <div class="mt-auto">
            <button id="sidebarEmergencyBtn" class="w-full bg-red-500 hover:bg-red-600 text-white py-4 rounded-xl font-bold transition-all duration-300">
                EMERGENCY SOS
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 p-8 overflow-auto">
        <!-- Header -->
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-3xl font-bold text-gray-800 animate-slide-in">Find Doctors</h1>
                <p class="text-gray-600 animate-slide-in" style="animation-delay: 0.1s">Book appointments with specialist doctors</p>
            </div>
            <div class="flex items-center space-x-4">
                <!-- Notifications -->
                <div class="relative">
                    <i id="notificationBell" class="fas fa-bell text-2xl text-gray-600 cursor-pointer hover:text-primary transition-colors"></i>
                    <span id="notificationBadge" class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
                </div>
                
                <!-- User Avatar -->
                <div id="headerAvatar" class="w-10 h-10 bg-gradient-to-r from-primary to-accent rounded-full flex items-center justify-center text-white font-semibold cursor-pointer hover:scale-110 transition-transform">
                    RJ
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover animate-scale-in">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">Available Doctors</p>
                        <h3 id="availableDoctorsCount" class="text-2xl font-bold text-gray-800 mt-2">47</h3>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                        <i class="fas fa-user-md text-blue-600 text-xl"></i>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover animate-scale-in" style="animation-delay: 0.1s">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">Specialties</p>
                        <h3 class="text-2xl font-bold text-gray-800 mt-2">12</h3>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                        <i class="fas fa-stethoscope text-green-600 text-xl"></i>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover animate-scale-in" style="animation-delay: 0.2s">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">Online Consult</p>
                        <h3 id="onlineDoctorsCount" class="text-2xl font-bold text-gray-800 mt-2">28</h3>
                    </div>
                    <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                        <i class="fas fa-video text-purple-600 text-xl"></i>
                    </div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover animate-scale-in" style="animation-delay: 0.3s">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">Avg. Rating</p>
                        <h3 class="text-2xl font-bold text-gray-800 mt-2">4.7</h3>
                    </div>
                    <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center">
                        <i class="fas fa-star text-orange-600 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Doctors Tabs -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 mb-8">
            <div class="flex border-b border-gray-200 overflow-x-auto">
                <button class="doctors-tab active flex-1 py-4 px-6 text-center font-semibold rounded-tl-2xl whitespace-nowrap" data-tab="browse">
                    <i class="fas fa-search mr-2"></i>Browse Doctors
                </button>
                <button class="doctors-tab flex-1 py-4 px-6 text-center font-semibold whitespace-nowrap" data-tab="specialties">
                    <i class="fas fa-stethoscope mr-2"></i>Specialties
                </button>
                <button class="doctors-tab flex-1 py-4 px-6 text-center font-semibold whitespace-nowrap" data-tab="my-doctors">
                    <i class="fas fa-heart mr-2"></i>My Doctors
                </button>
                <button class="doctors-tab flex-1 py-4 px-6 text-center font-semibold rounded-tr-2xl whitespace-nowrap" data-tab="book">
                    <i class="fas fa-calendar-plus mr-2"></i>Book Appointment
                </button>
            </div>
            
            <!-- Tab Content -->
            <div class="p-6">
                <!-- Browse Doctors -->
                <div id="browse-tab" class="tab-content active">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">Find Your Doctor</h2>
                        <div class="flex space-x-2">
                            <button id="filterBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors">
                                <i class="fas fa-filter mr-2"></i>Filter
                            </button>
                            <button id="sortBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors">
                                <i class="fas fa-sort mr-2"></i>Sort
                            </button>
                        </div>
                    </div>
                    
                    <!-- Search Bar -->
                    <div class="mb-6">
                        <div class="relative">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input id="doctorSearch" type="text" placeholder="Search doctors, specialties, or conditions..." class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    
                    <!-- Specialties Filter -->
                    <div class="mb-6">
                        <h3 class="font-semibold text-gray-800 mb-3">Specialties</h3>
                        <div id="specialtiesFilter" class="flex flex-wrap gap-2">
                            <button class="specialty-filter active bg-blue-500 text-white px-4 py-2 rounded-lg font-medium" data-specialty="all">All Specialties</button>
                            <button class="specialty-filter bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium" data-specialty="cardiology">Cardiology</button>
                            <button class="specialty-filter bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium" data-specialty="neurology">Neurology</button>
                            <button class="specialty-filter bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium" data-specialty="dermatology">Dermatology</button>
                            <button class="specialty-filter bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium" data-specialty="orthopedics">Orthopedics</button>
                            <button class="specialty-filter bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium" data-specialty="pediatrics">Pediatrics</button>
                        </div>
                    </div>
                    
                    <!-- Doctors Grid -->
                    <div id="doctorsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Doctor cards will be dynamically generated -->
                    </div>
                    
                    <!-- Load More -->
                    <div class="text-center mt-8">
                        <button id="loadMoreDoctors" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-medium transition-colors">
                            Load More Doctors
                        </button>
                    </div>
                </div>
                
                <!-- Specialties -->
                <div id="specialties-tab" class="tab-content hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">Medical Specialties</h2>
                        <button id="learnMoreSpecialties" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors">
                            <i class="fas fa-info-circle mr-2"></i>Learn More
                        </button>
                    </div>
                    
                    <div id="specialtiesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Specialty cards will be dynamically generated -->
                    </div>
                </div>
                
                <!-- My Doctors -->
                <div id="my-doctors-tab" class="tab-content hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">My Doctors</h2>
                        <button id="addNewDoctor" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                            <i class="fas fa-plus mr-2"></i>Add New Doctor
                        </button>
                    </div>
                    
                    <div id="myDoctorsList" class="space-y-6">
                        <!-- My doctors will be dynamically generated -->
                    </div>
                </div>
                
                <!-- Book Appointment -->
                <div id="book-tab" class="tab-content hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">Book Appointment</h2>
                        <div class="flex items-center space-x-2">
                            <span id="bookingStep" class="text-sm text-gray-500">Step 1 of 3</span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Doctor Selection -->
                        <div class="lg:col-span-1">
                            <div class="bg-white border border-gray-200 rounded-2xl p-6">
                                <h3 class="font-bold text-gray-800 mb-4">Select Doctor</h3>
                                
                                <div id="doctorSelectionList" class="space-y-4 max-h-96 overflow-y-auto pr-2">
                                    <!-- Doctor options will be dynamically generated -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Date & Time Selection -->
                        <div class="lg:col-span-1">
                            <div class="bg-white border border-gray-200 rounded-2xl p-6">
                                <h3 class="font-bold text-gray-800 mb-4">Select Date & Time</h3>
                                
                                <!-- Date Selection -->
                                <div class="mb-6">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Appointment Date</label>
                                    <input id="appointmentDate" type="date" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                
                                <!-- Time Slots -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Available Time Slots</label>
                                    <div id="timeSlotsGrid" class="grid grid-cols-2 gap-2">
                                        <!-- Time slots will be dynamically generated -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Appointment Details -->
                        <div class="lg:col-span-1">
                            <div class="bg-white border border-gray-200 rounded-2xl p-6">
                                <h3 class="font-bold text-gray-800 mb-4">Appointment Details</h3>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Consultation Type</label>
                                        <div class="grid grid-cols-2 gap-2">
                                            <div id="consultInPerson" class="consultation-type bg-white border border-gray-300 rounded-lg p-3 text-center cursor-pointer">
                                                <i class="fas fa-user-md text-blue-500 text-xl mb-2"></i>
                                                <p class="text-sm font-medium">In-person</p>
                                                <p class="text-xs text-gray-500">Clinic visit</p>
                                            </div>
                                            <div id="consultVideo" class="consultation-type bg-white border border-blue-500 rounded-lg p-3 text-center cursor-pointer selected">
                                                <i class="fas fa-video text-green-500 text-xl mb-2"></i>
                                                <p class="text-sm font-medium">Video Consult</p>
                                                <p class="text-xs text-gray-500">Online</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Reason for Visit</label>
                                        <textarea id="appointmentReason" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" rows="3" placeholder="Describe your symptoms or reason for appointment"></textarea>
                                    </div>
                                    
                                    <div class="border-t border-gray-200 pt-4">
                                        <div class="flex justify-between mb-2">
                                            <span class="text-gray-600">Consultation Fee</span>
                                            <span id="consultationFee" class="font-semibold">₹0</span>
                                        </div>
                                        <div class="flex justify-between mb-2">
                                            <span class="text-gray-600">Platform Fee</span>
                                            <span class="font-semibold">₹5</span>
                                        </div>
                                        <div class="flex justify-between font-bold text-lg border-t border-gray-200 pt-2">
                                            <span>Total</span>
                                            <span id="totalFee">₹5</span>
                                        </div>
                                    </div>
                                    
                                    <button id="confirmAppointmentBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition-colors">
                                        <i class="fas fa-calendar-check mr-2"></i>
                                        Confirm Appointment
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Emergency Button -->
    <button class="emergency-btn-fixed" id="globalEmergencyBtn" title="Emergency SOS">
        <i class="fas fa-phone-alt"></i>
        <span>SOS</span>
    </button>

    <!-- Emergency Modal -->
    <div class="emergency-modal" id="emergencyModal">
        <div class="emergency-modal-content">
            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Emergency SOS</h3>
            <p class="text-gray-600 mb-6">Are you sure you want to trigger emergency alert? This will notify emergency services and your contacts.</p>
            
            <div class="flex space-x-3">
                <button class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 rounded-lg font-semibold transition-colors" id="cancelEmergency">
                    Cancel
                </button>
                <button class="flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold transition-colors" id="confirmEmergency">
                    Confirm SOS
                </button>
            </div>
        </div>
    </div>

    <!-- Filter Modal -->
    <div class="emergency-modal hidden" id="filterModal">
        <div class="emergency-modal-content">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Filter Doctors</h3>
            
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Availability</label>
                    <select id="availabilityFilter" class="w-full p-3 border border-gray-300 rounded-lg">
                        <option value="all">All Availability</option>
                        <option value="online">Online Now</option>
                        <option value="today">Available Today</option>
                        <option value="week">This Week</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Experience</label>
                    <select id="experienceFilter" class="w-full p-3 border border-gray-300 rounded-lg">
                        <option value="all">Any Experience</option>
                        <option value="5">5+ years</option>
                        <option value="10">10+ years</option>
                        <option value="15">15+ years</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Rating</label>
                    <select id="ratingFilter" class="w-full p-3 border border-gray-300 rounded-lg">
                        <option value="all">Any Rating</option>
                        <option value="4">4+ stars</option>
                        <option value="4.5">4.5+ stars</option>
                        <option value="5">5 stars</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Consultation Fee</label>
                    <select id="feeFilter" class="w-full p-3 border border-gray-300 rounded-lg">
                        <option value="all">Any Price</option>
                        <option value="500">Under ₹500</option>
                        <option value="1000">Under ₹1000</option>
                        <option value="2000">Under ₹2000</option>
                    </select>
                </div>
            </div>
            
            <div class="flex space-x-3">
                <button class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 rounded-lg font-semibold transition-colors" id="cancelFilter">
                    Cancel
                </button>
                <button class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition-colors" id="applyFilter">
                    Apply Filters
                </button>
            </div>
        </div>
    </div>

    <!-- Sort Modal -->
    <div class="emergency-modal hidden" id="sortModal">
        <div class="emergency-modal-content">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Sort Doctors</h3>
            
            <div class="space-y-2 mb-6">
                <label class="flex items-center space-x-3 cursor-pointer">
                    <input type="radio" name="sortOption" value="relevance" class="text-blue-500" checked>
                    <span>Relevance</span>
                </label>
                <label class="flex items-center space-x-3 cursor-pointer">
                    <input type="radio" name="sortOption" value="rating" class="text-blue-500">
                    <span>Highest Rating</span>
                </label>
                <label class="flex items-center space-x-3 cursor-pointer">
                    <input type="radio" name="sortOption" value="experience" class="text-blue-500">
                    <span>Most Experience</span>
                </label>
                <label class="flex items-center space-x-3 cursor-pointer">
                    <input type="radio" name="sortOption" value="feeLow" class="text-blue-500">
                    <span>Fee: Low to High</span>
                </label>
                <label class="flex items-center space-x-3 cursor-pointer">
                    <input type="radio" name="sortOption" value="feeHigh" class="text-blue-500">
                    <span>Fee: High to Low</span>
                </label>
                <label class="flex items-center space-x-3 cursor-pointer">
                    <input type="radio" name="sortOption" value="distance" class="text-blue-500">
                    <span>Nearest First</span>
                </label>
            </div>
            
            <div class="flex space-x-3">
                <button class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 rounded-lg font-semibold transition-colors" id="cancelSort">
                    Cancel
                </button>
                <button class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition-colors" id="applySort">
                    Apply Sort
                </button>
            </div>
        </div>
    </div>
    <script src="sidebar.js"></script>
    <script>
        // Sample Data with Indian Names and Rupees
        const doctorsData = [
            {
                id: 1,
                name: "Dr. Arvind Sharma",
                specialty: "Cardiologist",
                specialtyCode: "cardiology",
                rating: 4.7,
                reviews: 128,
                experience: "15+ years",
                fee: 800,
                available: true,
                today: true,
                hospital: "Apollo Hospital, Delhi",
                distance: "2.1 km",
                favorite: false,
                online: true,
                imageColor: "blue"
            },
            {
                id: 2,
                name: "Dr. Priya Patel",
                specialty: "Dermatologist",
                specialtyCode: "dermatology",
                rating: 5.0,
                reviews: 94,
                experience: "12+ years",
                fee: 600,
                available: true,
                today: true,
                hospital: "Max Healthcare, Mumbai",
                distance: "3.5 km",
                favorite: true,
                online: true,
                imageColor: "green"
            },
            {
                id: 3,
                name: "Dr. Rajesh Kumar",
                specialty: "Pediatrician",
                specialtyCode: "pediatrics",
                rating: 5.0,
                reviews: 156,
                experience: "18+ years",
                fee: 700,
                available: false,
                today: false,
                hospital: "Fortis Hospital, Bangalore",
                distance: "5.2 km",
                favorite: false,
                online: false,
                imageColor: "purple"
            },
            {
                id: 4,
                name: "Dr. Anjali Gupta",
                specialty: "Neurologist",
                specialtyCode: "neurology",
                rating: 4.8,
                reviews: 87,
                experience: "14+ years",
                fee: 1200,
                available: true,
                today: true,
                hospital: "Medanta, Gurgaon",
                distance: "4.3 km",
                favorite: false,
                online: true,
                imageColor: "blue"
            },
            {
                id: 5,
                name: "Dr. Sanjay Singh",
                specialty: "Orthopedic Surgeon",
                specialtyCode: "orthopedics",
                rating: 4.9,
                reviews: 112,
                experience: "20+ years",
                fee: 1500,
                available: true,
                today: false,
                hospital: "Artemis Hospital, Delhi",
                distance: "6.7 km",
                favorite: false,
                online: true,
                imageColor: "yellow"
            },
            {
                id: 6,
                name: "Dr. Meera Reddy",
                specialty: "Gynecologist",
                specialtyCode: "gynecology",
                rating: 4.6,
                reviews: 143,
                experience: "16+ years",
                fee: 900,
                available: true,
                today: true,
                hospital: "KIMS Hospital, Hyderabad",
                distance: "3.2 km",
                favorite: true,
                online: false,
                imageColor: "pink"
            }
        ];

        const specialtiesData = [
            {
                name: "Cardiology",
                description: "Heart and blood vessels",
                doctors: 24,
                icon: "fa-heartbeat",
                color: "red"
            },
            {
                name: "Neurology",
                description: "Brain and nervous system",
                doctors: 18,
                icon: "fa-brain",
                color: "blue"
            },
            {
                name: "Dermatology",
                description: "Skin, hair, and nails",
                doctors: 15,
                icon: "fa-allergies",
                color: "yellow"
            },
            {
                name: "Orthopedics",
                description: "Bones and joints",
                doctors: 22,
                icon: "fa-bone",
                color: "purple"
            },
            {
                name: "Pediatrics",
                description: "Children's health",
                doctors: 20,
                icon: "fa-baby",
                color: "green"
            },
            {
                name: "Ophthalmology",
                description: "Eye care",
                doctors: 16,
                icon: "fa-eye",
                color: "pink"
            }
        ];

        const timeSlots = [
            "9:00 AM", "9:30 AM", "10:00 AM", "10:30 AM", 
            "11:00 AM", "11:30 AM", "2:00 PM", "2:30 PM",
            "3:00 PM", "3:30 PM", "4:00 PM", "4:30 PM"
        ];

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Load doctors data
            renderDoctors();
            renderSpecialties();
            renderMyDoctors();
            renderDoctorSelection();
            renderTimeSlots();
            
            // Initialize event listeners
            initializeEventListeners();
            
            // Update stats
            updateStats();
        }

        function initializeEventListeners() {
            // Tab switching
            const tabs = document.querySelectorAll('.doctors-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    switchTab(targetTab);
                });
            });

            // Specialty filter
            document.querySelectorAll('.specialty-filter').forEach(btn => {
                btn.addEventListener('click', function() {
                    const specialty = this.getAttribute('data-specialty');
                    filterBySpecialty(specialty);
                });
            });

            // Search functionality
            document.getElementById('doctorSearch').addEventListener('input', function(e) {
                searchDoctors(e.target.value);
            });

            // Filter button
            document.getElementById('filterBtn').addEventListener('click', function() {
                document.getElementById('filterModal').classList.remove('hidden');
                document.getElementById('filterModal').style.display = 'flex';
            });

            // Sort button
            document.getElementById('sortBtn').addEventListener('click', function() {
                document.getElementById('sortModal').classList.remove('hidden');
                document.getElementById('sortModal').style.display = 'flex';
            });

            // Apply filter
            document.getElementById('applyFilter').addEventListener('click', function() {
                applyFilters();
                document.getElementById('filterModal').style.display = 'none';
            });

            // Cancel filter
            document.getElementById('cancelFilter').addEventListener('click', function() {
                document.getElementById('filterModal').style.display = 'none';
            });

            // Apply sort
            document.getElementById('applySort').addEventListener('click', function() {
                const selectedSort = document.querySelector('input[name="sortOption"]:checked').value;
                sortDoctors(selectedSort);
                document.getElementById('sortModal').style.display = 'none';
            });

            // Cancel sort
            document.getElementById('cancelSort').addEventListener('click', function() {
                document.getElementById('sortModal').style.display = 'none';
            });

            // Load more doctors
            document.getElementById('loadMoreDoctors').addEventListener('click', loadMoreDoctors);

            // Learn more about specialties
            document.getElementById('learnMoreSpecialties').addEventListener('click', function() {
                showNotification('Each specialty focuses on different areas of medicine. Click "View Doctors" to see available specialists.', 'info');
            });

            // Add new doctor
            document.getElementById('addNewDoctor').addEventListener('click', function() {
                showNotification('Feature coming soon! You will be able to add doctors from your past consultations.', 'info');
            });

            // Consultation type selection
            document.getElementById('consultInPerson').addEventListener('click', function() {
                selectConsultationType('in-person');
            });

            document.getElementById('consultVideo').addEventListener('click', function() {
                selectConsultationType('video');
            });

            // Confirm appointment
            document.getElementById('confirmAppointmentBtn').addEventListener('click', confirmAppointment);

            // Appointment date change
            document.getElementById('appointmentDate').addEventListener('change', function() {
                updateBookingStep(2);
                updateTimeSlots();
            });

            // Emergency functionality
            initializeEmergencySystem();

            // Notification bell
            document.getElementById('notificationBell').addEventListener('click', function() {
                showNotification('You have 3 unread notifications', 'info');
                document.getElementById('notificationBadge').style.display = 'none';
            });
        }

        function renderDoctors(filteredDoctors = doctorsData) {
            const container = document.getElementById('doctorsGrid');
            container.innerHTML = '';

            filteredDoctors.forEach(doctor => {
                const doctorCard = createDoctorCard(doctor);
                container.appendChild(doctorCard);
            });
        }

        function createDoctorCard(doctor) {
            const card = document.createElement('div');
            card.className = 'doctor-card bg-white border border-gray-200 rounded-2xl p-6';
            card.setAttribute('data-id', doctor.id);
            card.setAttribute('data-specialty', doctor.specialtyCode);

            const colorClass = `bg-${doctor.imageColor}-100 text-${doctor.imageColor}-600`;
            const statusClass = doctor.online ? 'availability-online' : 'availability-offline';
            const statusText = doctor.online ? 'Online Now' : 'Offline';
            const todayText = doctor.today ? 'Available Today' : 'Available Tomorrow';

            card.innerHTML = `
                <div class="flex justify-between items-start mb-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-16 h-16 ${colorClass} rounded-2xl flex items-center justify-center">
                            <i class="fas fa-user-md text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">${doctor.name}</h3>
                            <p class="text-sm text-gray-600">${doctor.specialty}</p>
                            <div class="flex items-center mt-1">
                                <span class="rating-stars text-sm">
                                    ${generateStars(doctor.rating)}
                                </span>
                                <span class="text-xs text-gray-500 ml-1">${doctor.rating} (${doctor.reviews} reviews)</span>
                            </div>
                        </div>
                    </div>
                    <button class="favorite-btn ${doctor.favorite ? 'text-red-500' : 'text-gray-400 hover:text-red-500'} transition-colors" data-id="${doctor.id}">
                        <i class="${doctor.favorite ? 'fas' : 'far'} fa-heart"></i>
                    </button>
                </div>
                
                <div class="space-y-3">
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-map-marker-alt text-red-500 mr-2 w-4"></i>
                        <span class="text-sm">${doctor.hospital} • ${doctor.distance}</span>
                    </div>
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-clock text-blue-500 mr-2 w-4"></i>
                        <span class="text-sm">${doctor.experience} experience</span>
                    </div>
                    <div class="flex items-center text-gray-600">
                        <span class="availability-dot ${statusClass}"></span>
                        <span class="text-sm">${doctor.online ? 'Online Now • ' : ''}${todayText}</span>
                    </div>
                </div>
                
                <div class="mt-4 flex justify-between items-center">
                    <span class="specialty-tag specialty-${doctor.specialtyCode}">${doctor.specialty}</span>
                    <span class="text-lg font-bold text-gray-800">₹${doctor.fee}</span>
                </div>
                
                <div class="flex space-x-2 mt-4">
                    <button class="book-btn flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-medium transition-colors" data-id="${doctor.id}">
                        Book Visit
                    </button>
                    <button class="profile-btn flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-lg font-medium transition-colors" data-id="${doctor.id}">
                        Profile
                    </button>
                </div>
            `;

            // Add event listeners
            card.querySelector('.favorite-btn').addEventListener('click', function(e) {
                e.stopPropagation();
                toggleFavorite(doctor.id);
            });

            card.querySelector('.book-btn').addEventListener('click', function(e) {
                e.stopPropagation();
                bookDoctor(doctor.id);
            });

            card.querySelector('.profile-btn').addEventListener('click', function(e) {
                e.stopPropagation();
                showDoctorProfile(doctor.id);
            });

            card.addEventListener('click', function() {
                showDoctorDetails(doctor.id);
            });

            return card;
        }

        function generateStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }

        function renderSpecialties() {
            const container = document.getElementById('specialtiesGrid');
            container.innerHTML = '';

            specialtiesData.forEach(specialty => {
                const card = document.createElement('div');
                card.className = 'bg-white border border-gray-200 rounded-2xl p-6 card-hover';
                
                card.innerHTML = `
                    <div class="flex items-center space-x-4 mb-4">
                        <div class="w-12 h-12 bg-${specialty.color}-100 rounded-xl flex items-center justify-center">
                            <i class="fas ${specialty.icon} text-${specialty.color}-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">${specialty.name}</h3>
                            <p class="text-sm text-gray-600">${specialty.description}</p>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">Specialists in treating conditions related to this medical field.</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500">${specialty.doctors} doctors available</span>
                        <button class="view-doctors-btn text-blue-500 hover:text-blue-600 font-medium text-sm" data-specialty="${specialty.name.toLowerCase()}">
                            View Doctors →
                        </button>
                    </div>
                `;

                card.querySelector('.view-doctors-btn').addEventListener('click', function() {
                    const specialty = this.getAttribute('data-specialty');
                    switchTab('browse');
                    filterBySpecialty(specialty);
                });

                container.appendChild(card);
            });
        }

        function renderMyDoctors() {
            const container = document.getElementById('myDoctorsList');
            const myDoctors = doctorsData.filter(doctor => doctor.favorite);
            
            if (myDoctors.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-user-md text-gray-400 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">No Favorite Doctors</h3>
                        <p class="text-gray-500 mb-4">You haven't added any doctors to your favorites yet.</p>
                        <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors" onclick="switchTab('browse')">
                            Browse Doctors
                        </button>
                    </div>
                `;
                return;
            }

            container.innerHTML = '';
            myDoctors.forEach(doctor => {
                const card = document.createElement('div');
                card.className = 'bg-white border border-gray-200 rounded-2xl p-6 card-hover';
                
                card.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex items-start space-x-4">
                            <div class="w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center">
                                <i class="fas fa-user-md text-blue-600 text-2xl"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <h3 class="font-bold text-gray-800 text-lg">${doctor.name}</h3>
                                        <p class="text-gray-600">${doctor.specialty} • ${doctor.hospital}</p>
                                    </div>
                                    <span class="doctor-status status-available">Favorite</span>
                                </div>
                                
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
                                    <div>
                                        <p class="text-sm text-gray-500">Last Visit</p>
                                        <p class="font-semibold">Dec 15, 2023</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Next Appointment</p>
                                        <p class="font-semibold">Jan 15, 2024</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Consultation Fee</p>
                                        <p class="font-semibold">₹${doctor.fee}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Status</p>
                                        <p class="font-semibold">${doctor.available ? 'Available' : 'Busy'}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3 mt-4">
                        <button class="book-from-fav bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors" data-id="${doctor.id}">
                            <i class="fas fa-calendar-plus mr-2"></i>Book Appointment
                        </button>
                        <button class="message-doctor bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors">
                            <i class="fas fa-envelope mr-2"></i>Send Message
                        </button>
                    </div>
                `;

                card.querySelector('.book-from-fav').addEventListener('click', function() {
                    bookDoctor(doctor.id);
                });

                card.querySelector('.message-doctor').addEventListener('click', function() {
                    showNotification('Messaging feature coming soon!', 'info');
                });

                container.appendChild(card);
            });
        }

        function renderDoctorSelection() {
            const container = document.getElementById('doctorSelectionList');
            container.innerHTML = '';

            doctorsData.forEach(doctor => {
                const option = document.createElement('div');
                option.className = 'doctor-card bg-white border border-gray-200 rounded-xl p-4 cursor-pointer';
                option.setAttribute('data-id', doctor.id);
                
                const colorClass = `bg-${doctor.imageColor}-100 text-${doctor.imageColor}-600`;
                
                option.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="w-12 h-12 ${colorClass} rounded-xl flex items-center justify-center">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-800">${doctor.name}</h4>
                            <p class="text-sm text-gray-600">${doctor.specialty}</p>
                            <div class="flex items-center mt-1">
                                <span class="rating-stars text-xs">
                                    ${generateStars(doctor.rating)}
                                </span>
                                <span class="text-xs text-gray-500 ml-1">${doctor.rating} (${doctor.reviews})</span>
                            </div>
                        </div>
                    </div>
                `;

                option.addEventListener('click', function() {
                    document.querySelectorAll('#doctorSelectionList .doctor-card').forEach(card => {
                        card.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    selectDoctorForBooking(doctor.id);
                    updateBookingStep(2);
                });

                container.appendChild(option);
            });
        }

        function renderTimeSlots() {
            const container = document.getElementById('timeSlotsGrid');
            container.innerHTML = '';

            timeSlots.forEach((slot, index) => {
                const timeSlot = document.createElement('div');
                const isDisabled = index % 4 === 3; // Make every 4th slot disabled
                
                timeSlot.className = `appointment-slot border border-gray-300 rounded-lg p-3 text-center text-sm font-medium ${isDisabled ? 'time-slot-disabled' : ''}`;
                timeSlot.textContent = slot;
                
                if (!isDisabled) {
                    timeSlot.addEventListener('click', function() {
                        document.querySelectorAll('.appointment-slot:not(.time-slot-disabled)').forEach(slot => {
                            slot.classList.remove('selected');
                        });
                        this.classList.add('selected');
                        selectTimeSlot(slot);
                        updateBookingStep(3);
                    });
                }

                container.appendChild(timeSlot);
            });
        }

        function switchTab(tabName) {
            // Update active tab
            document.querySelectorAll('.doctors-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });

            // Show target tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                content.classList.add('hidden');
            });

            const targetTab = document.getElementById(`${tabName}-tab`);
            targetTab.classList.remove('hidden');
            targetTab.classList.add('active');

            // Update booking step
            if (tabName === 'book') {
                updateBookingStep(1);
            }
        }

        function filterBySpecialty(specialty) {
            // Update active filter button
            document.querySelectorAll('.specialty-filter').forEach(btn => {
                btn.classList.remove('active', 'bg-blue-500', 'text-white');
                btn.classList.add('bg-gray-100', 'text-gray-700');
                
                if (btn.getAttribute('data-specialty') === specialty) {
                    btn.classList.add('active', 'bg-blue-500', 'text-white');
                    btn.classList.remove('bg-gray-100', 'text-gray-700');
                }
            });

            // Filter doctors
            let filteredDoctors;
            if (specialty === 'all') {
                filteredDoctors = doctorsData;
            } else {
                filteredDoctors = doctorsData.filter(doctor => 
                    doctor.specialtyCode === specialty
                );
            }

            renderDoctors(filteredDoctors);
            updateStats();
        }

        function searchDoctors(query) {
            if (!query.trim()) {
                renderDoctors(doctorsData);
                return;
            }

            const searchTerm = query.toLowerCase();
            const filteredDoctors = doctorsData.filter(doctor =>
                doctor.name.toLowerCase().includes(searchTerm) ||
                doctor.specialty.toLowerCase().includes(searchTerm) ||
                doctor.hospital.toLowerCase().includes(searchTerm)
            );

            renderDoctors(filteredDoctors);
        }

        function applyFilters() {
            const availability = document.getElementById('availabilityFilter').value;
            const experience = document.getElementById('experienceFilter').value;
            const rating = document.getElementById('ratingFilter').value;
            const fee = document.getElementById('feeFilter').value;

            let filteredDoctors = doctorsData;

            // Apply availability filter
            if (availability === 'online') {
                filteredDoctors = filteredDoctors.filter(doctor => doctor.online);
            } else if (availability === 'today') {
                filteredDoctors = filteredDoctors.filter(doctor => doctor.today);
            }

            // Apply experience filter
            if (experience !== 'all') {
                const minExp = parseInt(experience);
                filteredDoctors = filteredDoctors.filter(doctor => {
                    const exp = parseInt(doctor.experience);
                    return exp >= minExp;
                });
            }

            // Apply rating filter
            if (rating !== 'all') {
                const minRating = parseFloat(rating);
                filteredDoctors = filteredDoctors.filter(doctor => doctor.rating >= minRating);
            }

            // Apply fee filter
            if (fee !== 'all') {
                const maxFee = parseInt(fee);
                filteredDoctors = filteredDoctors.filter(doctor => doctor.fee <= maxFee);
            }

            renderDoctors(filteredDoctors);
            showNotification(`Found ${filteredDoctors.length} doctors matching your criteria`, 'info');
        }

        function sortDoctors(sortBy) {
            let sortedDoctors = [...doctorsData];

            switch(sortBy) {
                case 'rating':
                    sortedDoctors.sort((a, b) => b.rating - a.rating);
                    break;
                case 'experience':
                    sortedDoctors.sort((a, b) => {
                        const expA = parseInt(a.experience);
                        const expB = parseInt(b.experience);
                        return expB - expA;
                    });
                    break;
                case 'feeLow':
                    sortedDoctors.sort((a, b) => a.fee - b.fee);
                    break;
                case 'feeHigh':
                    sortedDoctors.sort((a, b) => b.fee - a.fee);
                    break;
                case 'distance':
                    sortedDoctors.sort((a, b) => {
                        const distA = parseFloat(a.distance);
                        const distB = parseFloat(b.distance);
                        return distA - distB;
                    });
                    break;
                default:
                    // Relevance - default order
                    break;
            }

            renderDoctors(sortedDoctors);
        }

        function loadMoreDoctors() {
            // Simulate loading more doctors
            showNotification('Loading more doctors...', 'info');
            
            setTimeout(() => {
                // In a real app, this would fetch more data from an API
                showNotification('No more doctors to load', 'info');
            }, 1000);
        }

        function toggleFavorite(doctorId) {
            const doctor = doctorsData.find(d => d.id === doctorId);
            if (doctor) {
                doctor.favorite = !doctor.favorite;
                
                // Update the UI
                const favoriteBtn = document.querySelector(`.favorite-btn[data-id="${doctorId}"] i`);
                if (doctor.favorite) {
                    favoriteBtn.className = 'fas fa-heart text-red-500';
                    showNotification(`${doctor.name} added to favorites`, 'success');
                } else {
                    favoriteBtn.className = 'far fa-heart';
                    showNotification(`${doctor.name} removed from favorites`, 'warning');
                }
                
                // Update my doctors list if on that tab
                if (document.getElementById('my-doctors-tab').classList.contains('active')) {
                    renderMyDoctors();
                }
                
                updateStats();
            }
        }

        function bookDoctor(doctorId) {
            switchTab('book');
            
            // Select the doctor
            const doctorOption = document.querySelector(`#doctorSelectionList .doctor-card[data-id="${doctorId}"]`);
            if (doctorOption) {
                document.querySelectorAll('#doctorSelectionList .doctor-card').forEach(card => {
                    card.classList.remove('selected');
                });
                doctorOption.classList.add('selected');
                
                // Simulate click to trigger selection
                doctorOption.click();
            }
            
            showNotification('Please select date and time for your appointment', 'info');
        }

        function showDoctorProfile(doctorId) {
            const doctor = doctorsData.find(d => d.id === doctorId);
            if (doctor) {
                showNotification(`Opening ${doctor.name}'s profile...`, 'info');
                // In a real app, this would navigate to doctor profile page
            }
        }

        function showDoctorDetails(doctorId) {
            const doctor = doctorsData.find(d => d.id === doctorId);
            if (doctor) {
                const modalContent = `
                    <div class="space-y-4">
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-blue-100 rounded-2xl flex items-center justify-center">
                                <i class="fas fa-user-md text-blue-600 text-3xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">${doctor.name}</h3>
                                <p class="text-gray-600">${doctor.specialty}</p>
                                <div class="flex items-center mt-1">
                                    <span class="rating-stars">
                                        ${generateStars(doctor.rating)}
                                    </span>
                                    <span class="text-sm text-gray-500 ml-2">${doctor.rating} (${doctor.reviews} reviews)</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <p class="text-sm text-gray-500">Experience</p>
                                <p class="font-semibold">${doctor.experience}</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Consultation Fee</p>
                                <p class="font-semibold">₹${doctor.fee}</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Hospital</p>
                                <p class="font-semibold">${doctor.hospital}</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Distance</p>
                                <p class="font-semibold">${doctor.distance}</p>
                            </div>
                        </div>
                        
                        <div>
                            <p class="text-sm text-gray-500 mb-2">Availability</p>
                            <p class="font-semibold">${doctor.available ? 'Available for appointments' : 'Currently busy'}</p>
                            <p class="text-sm text-gray-600">${doctor.today ? 'Available today' : 'Available from tomorrow'}</p>
                        </div>
                        
                        <div class="flex space-x-3 pt-4">
                            <button class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-medium transition-colors" onclick="bookDoctor(${doctor.id})">
                                Book Appointment
                            </button>
                            <button class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-lg font-medium transition-colors" onclick="toggleFavorite(${doctor.id})">
                                ${doctor.favorite ? 'Remove Favorite' : 'Add to Favorites'}
                            </button>
                        </div>
                    </div>
                `;
                
                showCustomModal(doctor.name + ' - Details', modalContent);
            }
        }

        function selectDoctorForBooking(doctorId) {
            const doctor = doctorsData.find(d => d.id === doctorId);
            if (doctor) {
                document.getElementById('consultationFee').textContent = `₹${doctor.fee}`;
                document.getElementById('totalFee').textContent = `₹${doctor.fee + 5}`;
                
                // Update time slots based on doctor availability
                updateTimeSlots(doctor);
            }
        }

        function updateTimeSlots(doctor = null) {
            const slots = document.querySelectorAll('.appointment-slot:not(.time-slot-disabled)');
            const dateInput = document.getElementById('appointmentDate');
            const selectedDate = dateInput.value ? new Date(dateInput.value) : new Date();
            const dayOfWeek = selectedDate.getDay();
            
            slots.forEach((slot, index) => {
                // Reset all slots to available
                slot.classList.remove('time-slot-disabled');
                slot.style.cursor = 'pointer';
                
                // If doctor is busy today, disable some slots
                if (doctor && !doctor.today && isToday(selectedDate)) {
                    if (index % 2 === 0) { // Disable every other slot
                        slot.classList.add('time-slot-disabled');
                        slot.style.cursor = 'not-allowed';
                    }
                }
                
                // Disable slots on Sundays
                if (dayOfWeek === 0) {
                    slot.classList.add('time-slot-disabled');
                    slot.style.cursor = 'not-allowed';
                }
            });
        }

        function selectTimeSlot(time) {
            console.log('Selected time:', time);
            // Time selection is already handled by CSS class
        }

        function selectConsultationType(type) {
            const inPerson = document.getElementById('consultInPerson');
            const video = document.getElementById('consultVideo');
            
            if (type === 'in-person') {
                inPerson.classList.add('selected');
                inPerson.style.borderColor = '#2563eb';
                video.classList.remove('selected');
                video.style.borderColor = '#d1d5db';
                
                // Update fee for in-person consultation (usually higher)
                const currentFee = parseInt(document.getElementById('consultationFee').textContent.replace('₹', ''));
                document.getElementById('consultationFee').textContent = `₹${currentFee + 100}`;
                document.getElementById('totalFee').textContent = `₹${currentFee + 100 + 5}`;
            } else {
                video.classList.add('selected');
                video.style.borderColor = '#2563eb';
                inPerson.classList.remove('selected');
                inPerson.style.borderColor = '#d1d5db';
                
                // Reset to original fee for video consultation
                const selectedDoctor = document.querySelector('#doctorSelectionList .doctor-card.selected');
                if (selectedDoctor) {
                    const doctorId = parseInt(selectedDoctor.getAttribute('data-id'));
                    const doctor = doctorsData.find(d => d.id === doctorId);
                    if (doctor) {
                        document.getElementById('consultationFee').textContent = `₹${doctor.fee}`;
                        document.getElementById('totalFee').textContent = `₹${doctor.fee + 5}`;
                    }
                }
            }
        }

        function confirmAppointment() {
            const selectedDoctor = document.querySelector('#doctorSelectionList .doctor-card.selected');
            const selectedTime = document.querySelector('.appointment-slot.selected:not(.time-slot-disabled)');
            const appointmentDate = document.getElementById('appointmentDate').value;
            const appointmentReason = document.getElementById('appointmentReason').value;
            
            if (!selectedDoctor) {
                showNotification('Please select a doctor', 'error');
                return;
            }
            
            if (!appointmentDate) {
                showNotification('Please select a date', 'error');
                return;
            }
            
            if (!selectedTime) {
                showNotification('Please select a time slot', 'error');
                return;
            }
            
            const doctorId = parseInt(selectedDoctor.getAttribute('data-id'));
            const doctor = doctorsData.find(d => d.id === doctorId);
            
            // Show confirmation
            const confirmModalContent = `
                <div class="space-y-4">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-calendar-check text-green-600 text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-800">Confirm Appointment</h3>
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-4 space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Doctor:</span>
                            <span class="font-semibold">${doctor.name}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Date:</span>
                            <span class="font-semibold">${formatDate(appointmentDate)}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Time:</span>
                            <span class="font-semibold">${selectedTime.textContent}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Type:</span>
                            <span class="font-semibold">${document.getElementById('consultVideo').classList.contains('selected') ? 'Video Consultation' : 'In-person Visit'}</span>
                        </div>
                        <div class="flex justify-between font-bold border-t border-gray-200 pt-2">
                            <span>Total:</span>
                            <span>${document.getElementById('totalFee').textContent}</span>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3 pt-2">
                        <button class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 rounded-lg font-semibold transition-colors" onclick="closeModal()">
                            Cancel
                        </button>
                        <button class="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg font-semibold transition-colors" onclick="processAppointment()">
                            Confirm & Pay
                        </button>
                    </div>
                </div>
            `;
            
            showCustomModal('Confirm Appointment', confirmModalContent);
        }

        function processAppointment() {
            const btn = document.getElementById('confirmAppointmentBtn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Processing...';
            btn.disabled = true;
            
            // Simulate payment processing
            setTimeout(() => {
                showNotification('Appointment booked successfully! Confirmation sent to your email.', 'success');
                closeModal();
                
                // Reset form
                resetBookingForm();
                
                // Switch to appointments tab
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    showNotification('Redirecting to appointments...', 'info');
                    // In real app, navigate to appointments page
                }, 1000);
            }, 2000);
        }

        function resetBookingForm() {
            document.querySelectorAll('#doctorSelectionList .doctor-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            document.querySelectorAll('.appointment-slot').forEach(slot => {
                slot.classList.remove('selected');
            });
            
            document.getElementById('appointmentDate').value = '';
            document.getElementById('appointmentReason').value = '';
            document.getElementById('consultationFee').textContent = '₹0';
            document.getElementById('totalFee').textContent = '₹5';
            
            selectConsultationType('video');
            updateBookingStep(1);
        }

        function updateBookingStep(step) {
            document.getElementById('bookingStep').textContent = `Step ${step} of 3`;
        }

        function updateStats() {
            const availableDoctors = doctorsData.filter(doctor => doctor.available).length;
            const onlineDoctors = doctorsData.filter(doctor => doctor.online).length;
            
            document.getElementById('availableDoctorsCount').textContent = availableDoctors;
            document.getElementById('onlineDoctorsCount').textContent = onlineDoctors;
        }

        function initializeEmergencySystem() {
            const emergencyBtn = document.getElementById('globalEmergencyBtn');
            const sidebarEmergencyBtn = document.getElementById('sidebarEmergencyBtn');
            const emergencyModal = document.getElementById('emergencyModal');
            const confirmEmergency = document.getElementById('confirmEmergency');
            const cancelEmergency = document.getElementById('cancelEmergency');

            // Open emergency modal
            emergencyBtn.addEventListener('click', function() {
                emergencyModal.style.display = 'flex';
            });

            sidebarEmergencyBtn.addEventListener('click', function() {
                emergencyModal.style.display = 'flex';
            });

            // Confirm emergency
            confirmEmergency.addEventListener('click', function() {
                triggerEmergencyAlert();
                emergencyModal.style.display = 'none';
            });

            // Cancel emergency
            cancelEmergency.addEventListener('click', function() {
                emergencyModal.style.display = 'none';
            });

            // Close modal when clicking outside
            emergencyModal.addEventListener('click', function(e) {
                if (e.target === emergencyModal) {
                    emergencyModal.style.display = 'none';
                }
            });
        }

        function triggerEmergencyAlert() {
            const btn = document.getElementById('globalEmergencyBtn');
            const sidebarBtn = document.getElementById('sidebarEmergencyBtn');
            const originalHTML = btn.innerHTML;
            const sidebarOriginalHTML = sidebarBtn.innerHTML;
            
            // Visual feedback
            btn.classList.add('alerting');
            sidebarBtn.classList.add('alerting');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>ALERTING...</span>';
            sidebarBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> ALERTING...';
            
            // Simulate emergency process
            setTimeout(() => {
                showEmergencyNotification('Emergency services alerted! Help is on the way. Your location has been shared with emergency contacts.');
                
                // Reset button after 5 seconds
                setTimeout(() => {
                    btn.classList.remove('alerting');
                    sidebarBtn.classList.remove('alerting');
                    btn.innerHTML = originalHTML;
                    sidebarBtn.innerHTML = sidebarOriginalHTML;
                }, 5000);
                
            }, 3000);
        }

        // Utility Functions
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <i class="fas ${getNotificationIcon(type)}"></i>
                    <span>${message}</span>
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function showEmergencyNotification(message) {
            showNotification(message, 'error');
        }

        function getNotificationIcon(type) {
            switch(type) {
                case 'error': return 'fa-exclamation-triangle';
                case 'warning': return 'fa-exclamation-circle';
                case 'info': return 'fa-info-circle';
                default: return 'fa-check-circle';
            }
        }

        function showCustomModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'emergency-modal';
            modal.style.display = 'flex';
            modal.innerHTML = `
                <div class="emergency-modal-content">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">${title}</h3>
                    ${content}
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
            
            // Add close button if not present
            if (!content.includes('closeModal')) {
                const closeBtn = document.createElement('button');
                closeBtn.className = 'absolute top-4 right-4 text-gray-400 hover:text-gray-600';
                closeBtn.innerHTML = '<i class="fas fa-times"></i>';
                closeBtn.onclick = function() {
                    document.body.removeChild(modal);
                };
                modal.querySelector('.emergency-modal-content').appendChild(closeBtn);
            }
        }

        function closeModal() {
            const modal = document.querySelector('.emergency-modal');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function isToday(date) {
            const today = new Date();
            return date.getDate() === today.getDate() &&
                   date.getMonth() === today.getMonth() &&
                   date.getFullYear() === today.getFullYear();
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-IN', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        // Make functions available globally for inline onclick handlers
        window.switchTab = switchTab;
        window.toggleFavorite = toggleFavorite;
        window.bookDoctor = bookDoctor;
        window.processAppointment = processAppointment;
        window.closeModal = closeModal;
    </script>
</body>
</html>